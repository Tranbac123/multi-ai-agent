<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-AI-Agent Platform - Service Flow Diagrams</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .diagram-section {
            margin-bottom: 50px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        .diagram-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }
        .diagram-description {
            color: #666;
            margin-bottom: 20px;
            font-style: italic;
        }
        .mermaid {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn:hover {
            background: #2980b9;
        }
        .theme-selector {
            margin: 20px 0;
            text-align: center;
        }
        .theme-selector select {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Multi-AI-Agent Platform - Service Flow Diagrams</h1>
        
        <div class="controls">
            <button class="btn" onclick="toggleFullscreen()">üîç Toggle Fullscreen</button>
            <button class="btn" onclick="zoomIn()">üîç+ Zoom In</button>
            <button class="btn" onclick="zoomOut()">üîç- Zoom Out</button>
            <button class="btn" onclick="resetZoom()">üîÑ Reset Zoom</button>
        </div>

        <div class="theme-selector">
            <label for="theme">Theme: </label>
            <select id="theme" onchange="changeTheme()">
                <option value="default">Default</option>
                <option value="dark">Dark</option>
                <option value="forest">Forest</option>
                <option value="neutral">Neutral</option>
                <option value="base">Base</option>
            </select>
        </div>

        <!-- Detailed Visual Flow -->
        <div class="diagram-section">
            <div class="diagram-title">üèóÔ∏è Complete System Architecture</div>
            <div class="diagram-description">Enhanced visual system map with all services, connections, and detailed descriptions</div>
            <div class="mermaid" id="detailed-visual">
                <!-- This will be populated by JavaScript -->
            </div>
        </div>

        <!-- Detailed Sequence Flow -->
        <div class="diagram-section">
            <div class="diagram-title">üîÑ Complete User Journey</div>
            <div class="diagram-description">Step-by-step sequence showing user interaction from question to AI response</div>
            <div class="mermaid" id="detailed-sequence">
                <!-- This will be populated by JavaScript -->
            </div>
        </div>

        <!-- Comprehensive Data Flow -->
        <div class="diagram-section">
            <div class="diagram-title">üìä Data Processing Flows</div>
            <div class="diagram-description">Complete data flow showing all input types and processing paths</div>
            <div class="mermaid" id="comprehensive-data">
                <!-- This will be populated by JavaScript -->
            </div>
        </div>

        <!-- System Map -->
        <div class="diagram-section">
            <div class="diagram-title">üó∫Ô∏è System Architecture Map</div>
            <div class="diagram-description">Complete system architecture with all services and external dependencies</div>
            <div class="mermaid" id="system-map">
                <!-- This will be populated by JavaScript -->
            </div>
        </div>

        <!-- Web Chat Flow -->
        <div class="diagram-section">
            <div class="diagram-title">üí¨ Web Chat Flow</div>
            <div class="diagram-description">End-to-end web chat flow with real-time search integration</div>
            <div class="mermaid" id="web-chat">
                <!-- This will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            },
            sequence: {
                useMaxWidth: true,
                wrap: true
            }
        });

        let currentZoom = 1;
        let currentTheme = 'default';

        // Load diagram content
        async function loadDiagramContent() {
            try {
                const response = await fetch('detailed-visual-flow.mmd');
                const content = await response.text();
                document.getElementById('detailed-visual').textContent = content;
                
                const response2 = await fetch('detailed-sequence-flow.mmd');
                const content2 = await response2.text();
                document.getElementById('detailed-sequence').textContent = content2;
                
                const response3 = await fetch('comprehensive-data-flow.mmd');
                const content3 = await response3.text();
                document.getElementById('comprehensive-data').textContent = content3;
                
                const response4 = await fetch('system-map.mmd');
                const content4 = await response4.text();
                document.getElementById('system-map').textContent = content4;
                
                const response5 = await fetch('flow-web-chat.mmd');
                const content5 = await response5.text();
                document.getElementById('web-chat').textContent = content5;
                
                // Render all diagrams
                mermaid.init();
            } catch (error) {
                console.log('Loading local files, using embedded content...');
                // Fallback: Use embedded content or show instructions
                document.getElementById('detailed-visual').innerHTML = '<p>üìÅ Open detailed-visual-flow.mmd in your browser or use Mermaid Live Editor</p>';
                document.getElementById('detailed-sequence').innerHTML = '<p>üìÅ Open detailed-sequence-flow.mmd in your browser or use Mermaid Live Editor</p>';
                document.getElementById('comprehensive-data').innerHTML = '<p>üìÅ Open comprehensive-data-flow.mmd in your browser or use Mermaid Live Editor</p>';
                document.getElementById('system-map').innerHTML = '<p>üìÅ Open system-map.mmd in your browser or use Mermaid Live Editor</p>';
                document.getElementById('web-chat').innerHTML = '<p>üìÅ Open flow-web-chat.mmd in your browser or use Mermaid Live Editor</p>';
            }
        }

        // Theme control
        function changeTheme() {
            currentTheme = document.getElementById('theme').value;
            mermaid.initialize({
                startOnLoad: false,
                theme: currentTheme,
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                }
            });
            mermaid.init();
        }

        // Zoom controls
        function zoomIn() {
            currentZoom += 0.2;
            document.body.style.zoom = currentZoom;
        }

        function zoomOut() {
            currentZoom -= 0.2;
            if (currentZoom < 0.5) currentZoom = 0.5;
            document.body.style.zoom = currentZoom;
        }

        function resetZoom() {
            currentZoom = 1;
            document.body.style.zoom = currentZoom;
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // Load diagrams when page loads
        window.onload = loadDiagramContent;
    </script>
</body>
</html>
